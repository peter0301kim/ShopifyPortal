@page "/BrainzPointTrs"
@attribute [Authorize(Roles = "Administrator, User")]

@using BrainzParentsPortal.Helpers
@using BrainzParentsPortal.Shared.Models;
@using BrainzParentsPortal.Integration.PortalDb;
@using BrainzParentsPortal.Integration.PortalDb.Models;
@using BrainzParentsPortal.Integration.PortalDb.Services;
@inject PortalDbConnectionSettings PortalDbConnectionSettings
@inject CustomAuthenticationStateProvider CustomAuthenticationStateProvider
@inject NavigationManager NavManager

<MudText Typo="Typo.h5">BrainzPoint transfer list [@MemberName]</MudText>
<MudProgressLinear Color="Color.Primary" Indeterminate="IsProgress" Class="my-7" />

<MudTable Items="@DtSpentBrainzPointTrs" Dense="@dense" Hover="@hover" Bordered="@bordered" Striped="@striped" Filter="new Func<DtSpentBrainzPointTr,bool>(FilterFunc1)" @bind-SelectedItem="selectedItem1">
    <ToolBarContent>
        <MudTextField @bind-Value="searchString1" Immediate="true" Placeholder="Search" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0"></MudTextField>
        <MudSpacer />
        <MudDivider Vertical="true" FlexItem="true" />
        <MudSpacer />

    </ToolBarContent>
    <HeaderContent>
        <MudTh>Date</MudTh>
        <MudTh>Amount</MudTh>
        <MudTh>OrganizationName</MudTh>
        <MudTh>PayeeReference</MudTh>
        <MudTh>PayerReference</MudTh>
        <MudTh>Comments</MudTh>
        <MudTh>Action</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Date">@context.BrainzPointTrDate</MudTd>
        <MudTd DataLabel="Amount">@context.Amount</MudTd>
        <MudTd DataLabel="Org Name">@context.OrganizationName</MudTd>
        <MudTd DataLabel="Payee Reference">@context.PayeeReference</MudTd>
        <MudTd DataLabel="Payee Reference">@context.PayerReference</MudTd>
        <MudTd DataLabel="Comments">@context.Comments</MudTd>
        <MudTd DataLabel="Action">
            <MudSpacer />
            <MudIconButton Icon="@Icons.Material.Filled.ViewHeadline" Variant="Variant.Outlined" OnClick="@((e) => OnShowDetail(context))"></MudIconButton>
        </MudTd>
    </RowTemplate>
    <PagerContent>
        <MudTablePager />
    </PagerContent>
</MudTable>








