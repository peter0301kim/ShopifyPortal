@page "/Login/LoginPage"
@using System.Text.RegularExpressions;
@using System.ComponentModel.DataAnnotations;
@using ShopifyPortal.Helpers;
@using ShopifyPortal.Shared.Helpers;
@using ShopifyPortal.Shared.Models;
@using ShopifyPortal.Integration.PortalDb;
@using ShopifyPortal.Integration.PortalDb.Services;
@using Peter.Integration.Shopify;
@using Peter.Integration.Shopify.Services;
@using ShopifyPortal.Shared.SettingModels;
@inject IJSRuntime js
@inject CustomAuthenticationStateProvider CustomAuthenticationStateProvider
@inject NavigationManager NavManager
@inject IConfiguration Configuration
@inject IDialogService DialogService
@inject PortalDbConnectionSettings PortalDbConnectionSettings
@inject ShopifySettings ShopifySettings
@inject EmailServerSettings EmailServerSettings
@inject ShopifyPortalSettings ShopifyPortalSettings


<MudText Typo="Typo.h5">Log in</MudText>
<MudProgressLinear Color="Color.Primary" Indeterminate="IsProgress" Class="my-7" />

<EditForm Model="@LoginFormModel" OnValidSubmit="OnValidSubmit" Style="width:600px;" >
    <DataAnnotationsValidator />
    <MudGrid>
        <MudItem xs="12">

        </MudItem>
        <MudItem xs="12">
            <MudCard>
                <MudCardContent>
                    <MudTextField Label="Email" Class="mt-3" @bind-Value="LoginFormModel.Email" For="@(() => LoginFormModel.Email)"
                        AutoComplete="off"/>
                    <MudTextField Label="Password" @bind-Value="LoginFormModel.Password" For="@(() => LoginFormModel.Password)"
                                  InputType="@PasswordInput" Adornment="Adornment.End" AdornmentIcon="@PasswordInputIcon" OnAdornmentClick="OnShowPassword" AdornmentAriaLabel="Show Password" />

                    <MudButton Variant="MudBlazor.Variant.Text" Color="Color.Primary" OnClick="OnForgotPassword">Forgot password?</MudButton>

                </MudCardContent>
                <MudCardActions>
                    <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Primary" Class="ml-auto">Log in</MudButton>
                </MudCardActions>
            </MudCard>
        </MudItem>

    </MudGrid>
</EditForm>

<MudGrid>
    <MudItem xs="12">
        <MudPaper Class="pa-4 mt-4">
            <MudButton Variant="Variant.Filled" Color="Color.Secondary" DisableElevation="true" OnClick="@OnRegisterUser">Register user</MudButton>
        </MudPaper>
    </MudItem>

</MudGrid>



